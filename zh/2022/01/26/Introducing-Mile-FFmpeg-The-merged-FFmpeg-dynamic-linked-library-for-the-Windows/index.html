<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/zh/../img/favicon.png"><link rel="icon" href="/zh/../img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Kenji Mouri"><meta name="keywords" content=""><meta name="description" content="最近，我创建了一个叫 Mile.FFmpeg 的新项目，是 FFmpegUniversal 的后继者，是一个在 Windows 下使用的 FFmpeg 合并版动态链接库。 我相信在阅读到这里的时候会问我一些问题，下述是可能的问题及其回答。 如果你不擅长中文，可以点此阅读英文版。 (翻译: If you are not good at Chinese, you can click on the li"><meta property="og:type" content="article"><meta property="og:title" content="宣布 Mile.FFmpeg - 在 Windows 下使用的 FFmpeg 合并版动态链接库"><meta property="og:url" content="https://mourinaruto.github.io/zh/2022/01/26/Introducing-Mile-FFmpeg-The-merged-FFmpeg-dynamic-linked-library-for-the-Windows/index.html"><meta property="og:site_name" content="大贤者初春令月"><meta property="og:description" content="最近，我创建了一个叫 Mile.FFmpeg 的新项目，是 FFmpegUniversal 的后继者，是一个在 Windows 下使用的 FFmpeg 合并版动态链接库。 我相信在阅读到这里的时候会问我一些问题，下述是可能的问题及其回答。 如果你不擅长中文，可以点此阅读英文版。 (翻译: If you are not good at Chinese, you can click on the li"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-01-26T22:03:02.000Z"><meta property="article:modified_time" content="2024-06-17T16:36:24.735Z"><meta property="article:author" content="Kenji Mouri"><meta property="article:tag" content="技术"><meta property="article:tag" content="Windows"><meta property="article:tag" content="Windows 应用"><meta property="article:tag" content="开发"><meta property="article:tag" content="宣布"><meta name="twitter:card" content="summary_large_image"><title>宣布 Mile.FFmpeg - 在 Windows 下使用的 FFmpeg 合并版动态链接库 - 大贤者初春令月</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/zh/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/zh/css/main.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2188012_jkjop06z1g.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"mourinaruto.github.io",root:"/zh/",version:"1.8.14",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:1280544492,leancloud:{app_id:"qEO7L1QVXqw752KnQk88IfDS-MdYXbMMI",app_key:"fEqb7CwIp1LJnuHKnhRlI2wh",server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/zh/local-search.xml"}</script><script src="/zh/js/utils.js"></script><script src="/zh/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/zh/"><strong>大贤者初春令月</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/zh/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/zh/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/zh/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/zh/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://github.com/MouriNaruto/MouriDocs"><i class="iconfont icon-book"></i> Docs</a></li><li class="nav-item"><a class="nav-link" href="https://mourinaruto.github.io/en/"><i class="iconfont icon-book"></i> English</a></li><li class="nav-item"><a class="nav-link" href="/zh/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item"><a class="nav-link" href="/zh/links/"><i class="iconfont icon-link-fill"></i> 友链</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(/zh/../img/background.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="宣布 Mile.FFmpeg - 在 Windows 下使用的 FFmpeg 合并版动态链接库"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-01-26 22:03" pubdate>2022年1月26日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 1.1k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 9 分钟</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">宣布 Mile.FFmpeg - 在 Windows 下使用的 FFmpeg 合并版动态链接库</h1><div class="markdown-body"><p>最近，我创建了一个叫 <a target="_blank" rel="noopener" href="https://github.com/ProjectMile/Mile.FFmpeg">Mile.FFmpeg</a> 的新项目，是 <a target="_blank" rel="noopener" href="https://github.com/M2Team/FFmpegUniversal">FFmpegUniversal</a> 的后继者，是一个在 Windows 下使用的 FFmpeg 合并版动态链接库。</p><p>我相信在阅读到这里的时候会问我一些问题，下述是可能的问题及其回答。</p><p>如果你不擅长中文，可以<a target="_blank" rel="noopener" href="https://mouri.moe/en/2022/01/26/Introducing-Mile-FFmpeg-The-merged-FFmpeg-dynamic-linked-library-for-the-Windows/">点此</a>阅读英文版。 (翻译: If you are not good at Chinese, you can click on the link in this paragraph to read the English version.)</p><h2 id="合并版动态链接库的优势"><a href="#合并版动态链接库的优势" class="headerlink" title="合并版动态链接库的优势"></a>合并版动态链接库的优势</h2><ul><li>合并后的动态库可以减少至少 2MB 的二进制大小。如果我们启用一些第三方模块并将其合并，我们可以减少更多的空间</li><li>合并后的动态库可以保持输出二进制文件树的整洁，我将尝试在我的桌面应用程序中使用 FFmpegInteropX，通过 XAML Islands 和 Media Foundation 直接使用 MediaPlayerElement。我的应用程序将支持便携式模式。基于此，我将尝试用 C++/WinRT 重写 FFmpegInteropX，因为我可以使用一些开源的基础设施，使二进制文件只依赖于 ucrtbase.dll。 我将尝试为这个项目提供我的重写实现，因为我喜欢创造或贡献给开源项目</li></ul><h2 id="为什么重制-FFmpegUniversal"><a href="#为什么重制-FFmpegUniversal" class="headerlink" title="为什么重制 FFmpegUniversal"></a>为什么重制 FFmpegUniversal</h2><p>之所以要做一个新的实现，是因为我想让我的解决方案支持 Windows 桌面应用程序，并且简化构建过程。我试图找到一种从 *.lib 中获取所有的符号并生成 dll 导出定义而不是仅仅为了得到dll导出定义而先构建动态版本的方法。</p><p>同时我改用 vcpkg 来简化项目，提供 NuGet 包并支持 Windows Vista RTM 或更高版本。</p><h2 id="Mile-FFmpeg-功能"><a href="#Mile-FFmpeg-功能" class="headerlink" title="Mile.FFmpeg 功能"></a>Mile.FFmpeg 功能</h2><ul><li>基于 vcpkg 提供的 FFmpeg 最新稳定版的代码树</li><li>使用 vcpkg 编译 FFmpeg 并开启以下第三方库：aom, avcodec, avdevice, avfilter, avformat, bzip2, dav1d, fontconfig, freetype, iconv, ilbc, lzma, modplug, mp3lame, openh264, openjpeg, opus, snappy, soxr, speex, srt, swresample, swscale, theora, vorbis, vpx, webp, xml2 and zlib</li><li>使用 VC-LTL 5.x 工具链缩减二进制的体积</li><li>提供 NuGet 包</li></ul><h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>你只需要在你的 NuGet 客户端搜索 Mile.FFmpeg 包即可，如果你不想使用 NuGet 包管理器则可去 GitHub Releases 下载。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>我希望你能够使用愉快，感谢阅读。</p></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/zh/categories/%E6%8A%80%E6%9C%AF/">技术</a> <a class="hover-with-bg" href="/zh/categories/%E6%8A%80%E6%9C%AF/Windows/">Windows</a> <a class="hover-with-bg" href="/zh/categories/%E6%8A%80%E6%9C%AF/Windows/Windows-%E5%BA%94%E7%94%A8/">Windows 应用</a> <a class="hover-with-bg" href="/zh/categories/%E6%8A%80%E6%9C%AF/Windows/Windows-%E5%BA%94%E7%94%A8/%E5%BC%80%E5%8F%91/">开发</a> <a class="hover-with-bg" href="/zh/categories/%E6%8A%80%E6%9C%AF/Windows/Windows-%E5%BA%94%E7%94%A8/%E5%BC%80%E5%8F%91/%E5%AE%A3%E5%B8%83/">宣布</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/zh/tags/%E6%8A%80%E6%9C%AF/">技术</a> <a class="hover-with-bg" href="/zh/tags/Windows/">Windows</a> <a class="hover-with-bg" href="/zh/tags/Windows-%E5%BA%94%E7%94%A8/">Windows 应用</a> <a class="hover-with-bg" href="/zh/tags/%E5%BC%80%E5%8F%91/">开发</a> <a class="hover-with-bg" href="/zh/tags/%E5%AE%A3%E5%B8%83/">宣布</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-NC-ND 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/zh/2022/02/06/Use-GitHub-repository-to-host-symbol-server/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">使用 GitHub 仓库托管符号服务器</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/zh/2021/11/25/Use-VC-LTL-in-your-Cpp-WinRT-UWP-projects/"><span class="hidden-mobile">在你的 C++/WinRT UWP 项目中使用 VC-LTL</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments" lazyload><script type="text/javascript">Fluid.utils.loadComments("#comments",(function(){var t=document.documentElement.getAttribute("data-user-color-scheme");t="dark"===t?"github-dark":"github-light",window.UtterancesThemeLight="github-light",window.UtterancesThemeDark="github-dark";var e=document.createElement("script");e.setAttribute("src","https://utteranc.es/client.js"),e.setAttribute("repo","MouriNaruto/MouriNaruto"),e.setAttribute("issue-term","pathname"),e.setAttribute("label","blog"),e.setAttribute("theme",t),e.setAttribute("crossorigin","anonymous"),document.getElementById("comments").appendChild(e)}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div><span id="cnzz_stat_icon_1280544492" style="display:none"></span></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/zh/js/events.js"></script><script src="/zh/js/plugins.js"></script><script src="/zh/js/local-search.js"></script><script src="/zh/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script defer src="/zh/js/leancloud.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script defer src="//s4.cnzz.com/z_stat.php?id=1280544492&show=pic" type="text/javascript"></script><script src="/zh/js/boot.js"></script></body></html>